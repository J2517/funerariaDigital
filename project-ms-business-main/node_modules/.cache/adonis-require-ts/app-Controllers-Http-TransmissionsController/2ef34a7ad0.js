"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Transmission_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Models/Transmission"));
const TransmissionValidator_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Validators/TransmissionValidator"));
class TransmissionsController {
    async find({ request, params }) {
        if (params.id) {
            const theTransmission = await Transmission_1.default.findOrFail(params.id);
            return theTransmission;
        }
        else {
            const data = request.all();
            if ("page" in data && "per_page" in data) {
                const page = request.input("page", 1);
                const perPage = request.input("per_page", 20);
                return await Transmission_1.default.query().paginate(page, perPage);
            }
            else {
                return await Transmission_1.default.query();
            }
        }
    }
    async create({ request }) {
        const validatedData = await request.validate(TransmissionValidator_1.default);
        const theTransmission = await Transmission_1.default.create(validatedData);
        return theTransmission;
    }
}
exports.default = TransmissionsController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHJhbnNtaXNzaW9uc0NvbnRyb2xsZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJUcmFuc21pc3Npb25zQ29udHJvbGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUNBLGlHQUFtRDtBQUNuRCx1SEFBeUU7QUFFekUsTUFBcUIsdUJBQXVCO0lBRW5DLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUF1QjtRQUN4RCxJQUFJLE1BQU0sQ0FBQyxFQUFFLEVBQUU7WUFDYixNQUFNLGVBQWUsR0FBaUIsTUFBTSxzQkFBWSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDL0UsT0FBTyxlQUFlLENBQUM7U0FDeEI7YUFBTTtZQUNMLE1BQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUMzQixJQUFJLE1BQU0sSUFBSSxJQUFJLElBQUksVUFBVSxJQUFJLElBQUksRUFBRTtnQkFDeEMsTUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQ3RDLE1BQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsVUFBVSxFQUFFLEVBQUUsQ0FBQyxDQUFDO2dCQUM5QyxPQUFPLE1BQU0sc0JBQVksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO2FBQzNEO2lCQUFNO2dCQUNMLE9BQU8sTUFBTSxzQkFBWSxDQUFDLEtBQUssRUFBRSxDQUFDO2FBQ25DO1NBQ0Y7SUFDSCxDQUFDO0lBR00sS0FBSyxDQUFDLE1BQU0sQ0FBQyxFQUFFLE9BQU8sRUFBdUI7UUFFbEQsTUFBTSxhQUFhLEdBQUcsTUFBTSxPQUFPLENBQUMsUUFBUSxDQUFDLCtCQUFxQixDQUFDLENBQUM7UUFHcEUsTUFBTSxlQUFlLEdBQWlCLE1BQU0sc0JBQVksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUM7UUFHL0UsT0FBTyxlQUFlLENBQUM7SUFDekIsQ0FBQztDQUNGO0FBN0JELDBDQTZCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEh0dHBDb250ZXh0Q29udHJhY3QgfSBmcm9tIFwiQGlvYzpBZG9uaXMvQ29yZS9IdHRwQ29udGV4dFwiO1xuaW1wb3J0IFRyYW5zbWlzc2lvbiBmcm9tIFwiQXBwL01vZGVscy9UcmFuc21pc3Npb25cIjtcbmltcG9ydCBUcmFuc21pc3Npb25WYWxpZGF0b3IgZnJvbSBcIkFwcC9WYWxpZGF0b3JzL1RyYW5zbWlzc2lvblZhbGlkYXRvclwiOyAvLyBJbXBvcnRhbW9zIGVsIHZhbGlkYWRvciBkZSBUcmFuc21pc3Npb25cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHJhbnNtaXNzaW9uc0NvbnRyb2xsZXIge1xuICAvLyBNw6l0b2RvIHBhcmEgbGlzdGFyIG8gYnVzY2FyIHVuYSB0cmFuc21pc2nDs24gZXNwZWPDrWZpY2FcbiAgcHVibGljIGFzeW5jIGZpbmQoeyByZXF1ZXN0LCBwYXJhbXMgfTogSHR0cENvbnRleHRDb250cmFjdCkge1xuICAgIGlmIChwYXJhbXMuaWQpIHtcbiAgICAgIGNvbnN0IHRoZVRyYW5zbWlzc2lvbjogVHJhbnNtaXNzaW9uID0gYXdhaXQgVHJhbnNtaXNzaW9uLmZpbmRPckZhaWwocGFyYW1zLmlkKTtcbiAgICAgIHJldHVybiB0aGVUcmFuc21pc3Npb247XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRhdGEgPSByZXF1ZXN0LmFsbCgpO1xuICAgICAgaWYgKFwicGFnZVwiIGluIGRhdGEgJiYgXCJwZXJfcGFnZVwiIGluIGRhdGEpIHtcbiAgICAgICAgY29uc3QgcGFnZSA9IHJlcXVlc3QuaW5wdXQoXCJwYWdlXCIsIDEpO1xuICAgICAgICBjb25zdCBwZXJQYWdlID0gcmVxdWVzdC5pbnB1dChcInBlcl9wYWdlXCIsIDIwKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IFRyYW5zbWlzc2lvbi5xdWVyeSgpLnBhZ2luYXRlKHBhZ2UsIHBlclBhZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IFRyYW5zbWlzc2lvbi5xdWVyeSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIE3DqXRvZG8gcGFyYSBjcmVhciB1bmEgbnVldmEgdHJhbnNtaXNpw7NuXG4gIHB1YmxpYyBhc3luYyBjcmVhdGUoeyByZXF1ZXN0IH06IEh0dHBDb250ZXh0Q29udHJhY3QpIHtcbiAgICAvLyBWYWxpZGFtb3MgbG9zIGRhdG9zIGRlIGxhIHNvbGljaXR1ZCB1c2FuZG8gZWwgdmFsaWRhZG9yIGRlIFRyYW5zbWlzc2lvblxuICAgIGNvbnN0IHZhbGlkYXRlZERhdGEgPSBhd2FpdCByZXF1ZXN0LnZhbGlkYXRlKFRyYW5zbWlzc2lvblZhbGlkYXRvcik7XG5cbiAgICAvLyBDcmVhbW9zIHVuYSBudWV2YSBpbnN0YW5jaWEgZGUgVHJhbnNtaXNzaW9uIGNvbiBsb3MgZGF0b3MgdmFsaWRhZG9zXG4gICAgY29uc3QgdGhlVHJhbnNtaXNzaW9uOiBUcmFuc21pc3Npb24gPSBhd2FpdCBUcmFuc21pc3Npb24uY3JlYXRlKHZhbGlkYXRlZERhdGEpO1xuXG4gICAgLy8gRGV2b2x2ZW1vcyBsYSB0cmFuc21pc2nDs24gY3JlYWRhXG4gICAgcmV0dXJuIHRoZVRyYW5zbWlzc2lvbjtcbiAgfVxufVxuXG5cblxuXG4iXX0=