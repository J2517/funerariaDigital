"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Camera_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Models/Camera"));
const CameraValidator_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Validators/CameraValidator"));
class CamerasController {
    async find({ request, params }) {
        if (params.id) {
            const theCamera = await Camera_1.default.findOrFail(params.id);
            return theCamera;
        }
        else {
            const data = request.all();
            if ("page" in data && "per_page" in data) {
                const page = request.input("page", 1);
                const perPage = request.input("per_page", 20);
                return await Camera_1.default.query().paginate(page, perPage);
            }
            else {
                return await Camera_1.default.query();
            }
        }
    }
    async create({ request }) {
        const validatedData = await request.validate(CameraValidator_1.default);
        const theCamera = await Camera_1.default.create(validatedData);
        return theCamera;
    }
}
exports.default = CamerasController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2FtZXJhc0NvbnRyb2xsZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJDYW1lcmFzQ29udHJvbGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUNBLHFGQUF1QztBQUN2QywyR0FBNkQ7QUFFN0QsTUFBcUIsaUJBQWlCO0lBRTdCLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUF1QjtRQUN4RCxJQUFJLE1BQU0sQ0FBQyxFQUFFLEVBQUU7WUFDYixNQUFNLFNBQVMsR0FBVyxNQUFNLGdCQUFNLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUM3RCxPQUFPLFNBQVMsQ0FBQztTQUNsQjthQUFNO1lBQ0wsTUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBQzNCLElBQUksTUFBTSxJQUFJLElBQUksSUFBSSxVQUFVLElBQUksSUFBSSxFQUFFO2dCQUN4QyxNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDdEMsTUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUFDLENBQUM7Z0JBQzlDLE9BQU8sTUFBTSxnQkFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7YUFDckQ7aUJBQU07Z0JBQ0wsT0FBTyxNQUFNLGdCQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7YUFDN0I7U0FDRjtJQUNILENBQUM7SUFHTSxLQUFLLENBQUMsTUFBTSxDQUFDLEVBQUUsT0FBTyxFQUF1QjtRQUVsRCxNQUFNLGFBQWEsR0FBRyxNQUFNLE9BQU8sQ0FBQyxRQUFRLENBQUMseUJBQWUsQ0FBQyxDQUFDO1FBRzlELE1BQU0sU0FBUyxHQUFXLE1BQU0sZ0JBQU0sQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUM7UUFHN0QsT0FBTyxTQUFTLENBQUM7SUFDbkIsQ0FBQztDQUNGO0FBN0JELG9DQTZCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEh0dHBDb250ZXh0Q29udHJhY3QgfSBmcm9tIFwiQGlvYzpBZG9uaXMvQ29yZS9IdHRwQ29udGV4dFwiO1xuaW1wb3J0IENhbWVyYSBmcm9tIFwiQXBwL01vZGVscy9DYW1lcmFcIjtcbmltcG9ydCBDYW1lcmFWYWxpZGF0b3IgZnJvbSBcIkFwcC9WYWxpZGF0b3JzL0NhbWVyYVZhbGlkYXRvclwiOyAvLyBJbXBvcnRhbW9zIGVsIHZhbGlkYWRvciBkZSBDYW1lcmFcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FtZXJhc0NvbnRyb2xsZXIge1xuICAvLyBNw6l0b2RvIHBhcmEgbGlzdGFyIG8gYnVzY2FyIHVuYSBjw6FtYXJhIGVzcGVjw61maWNhXG4gIHB1YmxpYyBhc3luYyBmaW5kKHsgcmVxdWVzdCwgcGFyYW1zIH06IEh0dHBDb250ZXh0Q29udHJhY3QpIHtcbiAgICBpZiAocGFyYW1zLmlkKSB7XG4gICAgICBjb25zdCB0aGVDYW1lcmE6IENhbWVyYSA9IGF3YWl0IENhbWVyYS5maW5kT3JGYWlsKHBhcmFtcy5pZCk7XG4gICAgICByZXR1cm4gdGhlQ2FtZXJhO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkYXRhID0gcmVxdWVzdC5hbGwoKTtcbiAgICAgIGlmIChcInBhZ2VcIiBpbiBkYXRhICYmIFwicGVyX3BhZ2VcIiBpbiBkYXRhKSB7XG4gICAgICAgIGNvbnN0IHBhZ2UgPSByZXF1ZXN0LmlucHV0KFwicGFnZVwiLCAxKTtcbiAgICAgICAgY29uc3QgcGVyUGFnZSA9IHJlcXVlc3QuaW5wdXQoXCJwZXJfcGFnZVwiLCAyMCk7XG4gICAgICAgIHJldHVybiBhd2FpdCBDYW1lcmEucXVlcnkoKS5wYWdpbmF0ZShwYWdlLCBwZXJQYWdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBDYW1lcmEucXVlcnkoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBNw6l0b2RvIHBhcmEgY3JlYXIgdW5hIG51ZXZhIGPDoW1hcmFcbiAgcHVibGljIGFzeW5jIGNyZWF0ZSh7IHJlcXVlc3QgfTogSHR0cENvbnRleHRDb250cmFjdCkge1xuICAgIC8vIFZhbGlkYW1vcyBsb3MgZGF0b3MgZGUgbGEgc29saWNpdHVkIHVzYW5kbyBlbCB2YWxpZGFkb3IgZGUgQ2FtZXJhXG4gICAgY29uc3QgdmFsaWRhdGVkRGF0YSA9IGF3YWl0IHJlcXVlc3QudmFsaWRhdGUoQ2FtZXJhVmFsaWRhdG9yKTtcblxuICAgIC8vIENyZWFtb3MgdW5hIG51ZXZhIGluc3RhbmNpYSBkZSBDYW1lcmEgY29uIGxvcyBkYXRvcyB2YWxpZGFkb3NcbiAgICBjb25zdCB0aGVDYW1lcmE6IENhbWVyYSA9IGF3YWl0IENhbWVyYS5jcmVhdGUodmFsaWRhdGVkRGF0YSk7XG5cbiAgICAvLyBEZXZvbHZlbW9zIGxhIGPDoW1hcmEgY3JlYWRhXG4gICAgcmV0dXJuIHRoZUNhbWVyYTtcbiAgfVxufVxuXG5cblxuIl19